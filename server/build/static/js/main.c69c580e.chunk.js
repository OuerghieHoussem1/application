(this.webpackJsonpweb_front=this.webpackJsonpweb_front||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(43),a=n.n(r),i=n(57),o=n(12),s=n(13),l=n(26),d=n(28),j=n.n(d),u=n(36),b=n(37),h=n.n(b),p=function(e){return h.a.post("/newReservation",e)},x=function(e){return h.a.post("/checkEmail",e)},O=function(e){return h.a.post("/acceptReservation",e)},f=function(e){return h.a.post("/refuseReservation",e)},v=n(146),m=n(145),g=n.p+"static/media/logoFst.b7eafe59.png",y=n.p+"static/media/logoUtm.0b5808c7.png",w=n.p+"static/media/logoJPO.7f2a29c3.png",k=n(144),E=n(142),R=n(1);function C(){var e=Object(o.f)(),t=Object(l.b)(),n=Object(c.useState)(""),r=Object(s.a)(n,2),a=r[0],i=r[1],d=Object(c.useState)(""),b=Object(s.a)(d,2),h=b[0],O=b[1],f=Object(c.useState)(""),g=Object(s.a)(f,2),y=g[0],C=g[1],S=Object(c.useState)(""),A=Object(s.a)(S,2),T=A[0],I=A[1],_=Object(c.useState)(!1),V=Object(s.a)(_,2),D=V[0],N=V[1],B=Object(c.useState)(""),L=Object(s.a)(B,2),z=L[0],P=L[1],M=function(e){O(e),t(function(e){return function(){var t=Object(u.a)(j.a.mark((function t(n){var c,r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(e);case 3:c=t.sent,r=c.data,n({type:"GOOD_EMAIL",payload:r}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),a=t.t0.response.data.error,t.next=13,n({type:"BAD_EMAIL",payload:a});case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}({email:e}))},U=Object(l.c)((function(e){return e.etat}));return Object(R.jsxs)(m.a,{style:{paddingTop:40},children:[Object(R.jsx)("div",{className:"mainContainer",style:{width:"100%",height:"100%",color:"white",display:"flex",justifyContent:"center"},children:Object(R.jsx)("img",{style:{marginRight:20},src:w,width:"400vh"})}),Object(R.jsx)("div",{}),Object(R.jsx)(v.a,{style:{minWidth:0,backgroundColor:"rgba(255,255,255,.1)"},children:Object(R.jsxs)(k.a,{container:!0,padding:5,children:[Object(R.jsx)(k.a,{item:!0,xs:12,children:Object(R.jsx)("input",{onChange:function(e){return i(e.target.value)},value:a,name:"username",style:{color:"black",backgroundColor:"transparent",border:"0",marginTop:80,width:"100%",borderBottom:"2px solid white"},placeholder:"Nom et pr\xe9nom"})}),Object(R.jsxs)(k.a,{item:!0,xs:12,children:[Object(R.jsx)("input",{onChange:function(e){return M(e.target.value)},value:h,name:"email",style:{color:"black",backgroundColor:"transparent",border:"0",marginTop:40,width:"100%",borderBottom:"2px solid white"},placeholder:"Email"}),h.length>0&&Object(R.jsxs)("p",{style:{fontSize:"2vh",alignSelf:"flex-start",paddingTop:10,color:U.used?"red":"green"},children:[U.code,"."]})]}),Object(R.jsx)(k.a,{item:!0,xs:12,children:Object(R.jsx)("input",{onChange:function(e){return C(e.target.value)},value:y,name:"etablissement",style:{backgroundColor:"transparent",border:"0",marginTop:40,width:"100%",borderBottom:"2px solid white"},placeholder:"Etablissement"})}),Object(R.jsx)(k.a,{item:!0,xs:12,children:Object(R.jsx)("input",{onChange:function(e){return I(e.target.value)},value:T,name:"classe",style:{backgroundColor:"transparent",border:"0",marginTop:40,width:"100%",borderBottom:"2px solid white"},placeholder:"Classe"})}),Object(R.jsx)(k.a,{item:!0,xs:3,children:Object(R.jsxs)("div",{style:{color:"black",display:"flex",flexDirection:"row",alignItems:"flex-start",marginTop:40},children:[Object(R.jsx)("label",{children:"Vaccin\xe9:"}),Object(R.jsx)(E.a,{onClick:function(e){return N(!D)},checked:D,name:"vaccin",style:{color:"black",width:"100%"}})]})}),Object(R.jsxs)(k.a,{item:!0,xs:12,children:[Object(R.jsx)("label",{style:{color:"black"},children:"Veuillez mettre votre certificat de vaccination"}),Object(R.jsx)("input",{style:{color:"black"},type:"file",onChange:function(e){return P(e.target.files[0])}})]}),Object(R.jsx)(k.a,{item:!0,xs:12,children:Object(R.jsx)("button",{onClick:function(){var n=new FormData;n.append("files[]",z,z.name),n.append("name",a),n.append("email",h),n.append("etablissement",y),n.append("classe",T),n.append("vaccin",D),t(function(e,t){return function(){var n=Object(u.a)(j.a.mark((function n(c){var r,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p(e);case 3:return r=n.sent,a=r.data,n.next=7,c({type:"CREATE_RESERVATION",payload:a});case 7:t.push("reservation"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.error(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(n,e))},disabled:U.used||!D||!z,style:{color:"black",fontWeight:"bold",backgroundColor:"#367be3",borderRadius:50,marginTop:120,width:"100%"},children:"R\xe9server"})})]})})]})}n(123);var S=n(147);function A(){var e=Object(l.c)((function(e){return e.reservation}));return Object(R.jsxs)(m.a,{children:[Object(R.jsxs)(k.a,{container:!0,spacing:3,alignItems:"center",children:[Object(R.jsx)(k.a,{item:!0,xs:4,children:Object(R.jsx)("img",{style:{width:"50%",height:"auto"},src:g,width:200,height:200})}),Object(R.jsx)(k.a,{item:!0,xs:5,children:Object(R.jsx)("div",{style:{display:"flex",flexDirection:"column",color:"white"},children:Object(R.jsx)("h1",{style:{fontSize:"2.3vw"},children:"R\xe9servation effectu\xe9"})})}),Object(R.jsx)(k.a,{item:!0,xs:3,children:Object(R.jsx)("img",{style:{width:"50%",height:"auto"},src:y,width:200,height:200})})]}),Object(R.jsx)(S.a,{children:Object(R.jsx)(v.a,{children:Object(R.jsx)(k.a,{container:!0,padding:5,children:Object(R.jsx)(k.a,{item:!0,xs:12,children:Object(R.jsxs)(k.a,{container:!0,spacing:4,children:[Object(R.jsx)(k.a,{item:!0,xs:12,children:e.name}),Object(R.jsx)(k.a,{item:!0,xs:12,children:"Votre certificat de vaccination est en cours de v\xe9rification, une fois v\xe9rifi\xe9 nous vous enverrons un email contenant votre code de r\xe9servation et votre QR code. (Veuillez v\xe9rifier votre spam)"})]})})})})})]})}var T=n(76),I=n(4),_=n(7),V=n(140),D=n(60),N=n(148),B=n(149),L=n(150),z=n(151),P=n(152),M=n(153);function U(){var e=Object(l.c)((function(e){return e.allReservations})),t=Object(l.b)();Object(c.useEffect)((function(){t(function(){var e=Object(u.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/getReservations");case 3:n=e.sent,c=n.data,console.log(c),t({type:"ALL_RESERVATIONS",payload:c}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var n=Object(_.a)(V.a)((function(e){var t,n=e.theme;return t={},Object(I.a)(t,"&.".concat(D.a.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),Object(I.a)(t,"&.".concat(D.a.body),{fontSize:14}),t})),r=Object(_.a)(N.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));return Object(R.jsx)("div",{children:Object(R.jsx)(B.a,{component:v.a,children:Object(R.jsxs)(L.a,{sx:{minWidth:700},"aria-label":"customized table",children:[Object(R.jsx)(z.a,{children:Object(R.jsxs)(N.a,{children:[Object(R.jsx)(n,{children:"Code"}),Object(R.jsx)(n,{align:"left",children:"Nom et pr\xe9nom"}),Object(R.jsx)(n,{align:"left",children:"Email"}),Object(R.jsx)(n,{align:"left",children:"Etablissement"}),Object(R.jsx)(n,{align:"left",children:"Classe"}),Object(R.jsx)(n,{align:"left",children:"Voir certeficat de vaccination"}),Object(R.jsx)(n,{align:"left",children:"Accepter/Refuser"})]})}),Object(R.jsx)(P.a,{children:e.map((function(e,c){return Object(R.jsxs)(r,{children:[Object(R.jsx)(n,{component:"th",scope:"row",children:e.code}),Object(R.jsx)(n,{align:"left",children:e.name}),Object(R.jsx)(n,{align:"left",children:e.email}),Object(R.jsx)(n,{align:"left",children:e.etablissement}),Object(R.jsx)(n,{align:"left",children:e.classe}),Object(R.jsx)(n,{align:"center",children:Object(R.jsx)(M.a,{onClick:function(){return t=e.vaccineCerteficate,void window.open("/certeficates/".concat(t),"_blank").focus();var t},children:"voir certeficat"})}),e.accepted?Object(R.jsx)(n,{align:"left",children:Object(R.jsx)(M.a,{onClick:function(){return t((n={code:e.code},function(){var e=Object(u.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(n);case 3:c=e.sent,r=c.data,t({type:"UPDATE_RESERVATIONS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("an error occured");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var n},children:"Refuser"})}):Object(R.jsx)(n,{align:"left",children:Object(R.jsx)(M.a,{onClick:function(){return t((n={code:e.code},function(){var e=Object(u.a)(j.a.mark((function e(t){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(n);case 3:c=e.sent,r=c.data,t({type:"UPDATE_RESERVATIONS",payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("an error occured");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var n},children:"Accepter"})})]},c)}))})]})})})}var J=function(){return Object(R.jsx)(i.a,{children:Object(R.jsx)(o.c,{children:Object(R.jsxs)(T.BreakpointProvider,{children:[Object(R.jsx)(o.a,{path:"/",exact:!0,children:Object(R.jsx)(C,{})}),Object(R.jsx)(o.a,{path:"/reservation",exact:!0,children:Object(R.jsx)(A,{})}),Object(R.jsx)(o.a,{path:"/20101999CheckReservations20101999",exact:!0,children:Object(R.jsx)(U,{})})]})})})},W=n(35),F=n(77),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_RESERVATION":return t.payload;case"RESET":e=null;default:return e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{code:"email invalide",used:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GOOD_EMAIL":return e={code:"email valide",used:!1};case"BAD_EMAIL":return console.log(t.payload),e={code:t.payload,used:!0};default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_RESERVATIONS":return t.payload;case"UPDATE_RESERVATIONS":return e=e.map((function(e,n){if(e.code==t.payload.code)return t.payload}));default:return e}},H=Object(W.b)({reservation:G,etat:Q,allReservations:q}),K=Object(W.d)(H,Object(W.c)(Object(W.a)(F.a)));a.a.render(Object(R.jsx)(l.a,{store:K,children:Object(R.jsx)(J,{})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.c69c580e.chunk.js.map